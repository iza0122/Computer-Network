@page
@model IndexModel
@{
    ViewData["Title"] = "Remote Control Among Us";
}

<link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@400;700&family=Coiny&family=VT323&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<div class="au-char-red"></div>
<div class="au-char-blue"></div>
<div class="au-char-ghost"></div>
<div class="au-char-dead"></div>
<div class="au-char-cyan-vent"></div>
<div class="au-char-lime"></div>

<div class="main-wrapper">
    <div class="text-center mb-4">
        <h1 style="font-family: 'VT323'; font-size: 80px; text-shadow: 4px 4px 0 #000;">
            BẢNG ĐIỀU KHIỂN TỪ XA
        </h1>
        <div id="connectionStatus" onclick="handleConnection()">
            <i class="fas fa-plug"></i> KẾT NỐI HỆ THỐNG
        </div>
    </div>

    <div class="row">
        <div class="col-lg-4 order-mobile-2">
            <div class="control-panel p-2">
                <button class="btn btn-among-us w-100" onclick="guiLenh('Screenshot', this)">
                    <i class="fas fa-camera"></i> CHỤP MÀN HÌNH
                </button>
                <button class="btn btn-among-us w-100" onclick="guiLenh('KeyLogger', this)">
                    <i class="fas fa-keyboard"></i> LẤY KEYLOG
                </button>
                <button class="btn btn-among-us w-100" onclick="guiLenh('WebcamList', this)">
                    <i class="fas fa-video"></i> DANH SÁCH CAMERA
                </button>

                <div id="webcamControls" style="display:none;" class="mb-3">
                    <select id="webcamSelect" class="btn-among-us" style="font-size: 14px; background: #000;"></select>
                    <button class="btn btn-stop w-100" onclick="recordWebcam()">
                        <i class="fas fa-circle"></i> QUAY CLIP 10S
                    </button>
                </div>

                <button class="btn btn-among-us w-100" onclick="guiLenh('ListTask', this)">
                    <i class="fas fa-microchip"></i> XEM TÁC VỤ
                </button>

                <div class="mt-3">
                    <input id="appNameInput" placeholder="Nhập đường dẫn App..."
                           style="width:100%; padding:10px; border-radius:8px; border:2px solid #555; background: #000; color: #fff; margin-bottom:10px;" />
                    <button class="btn btn-start w-100" onclick="startApp()">
                        ▶ CHẠY ỨNG DỤNG
                    </button>
                </div>
            </div>
        </div>

        <div class="col-lg-8 order-mobile-1">
            <div class="tablet-container">
                <div class="tablet-screen" id="displayArea">
                    <div id="loadingSpinner" style="display:none; color: var(--among-cyan); text-align: center; margin-top: 20%;">
                        <i class="fas fa-spinner fa-spin fa-3x"></i><br>ĐANG TRUY XUẤT...
                    </div>
                    <img id="imgResult" style="display:none; width: 100%;" />
                    <video id="videoResult" controls style="display:none; width: 100%;"></video>
                    <pre id="textResult" style="display:none; padding: 15px; font-family: 'VT323'; color: #0f0; font-size: 18px;"></pre>
                </div>
            </div>

            <div class="d-flex gap-3 justify-content-center mt-2">
                <button class="btn btn-warning flex-fill" onclick="sysAction('Restart')">
                    <i class="fas fa-sync-alt fa-spin-hover"></i> RESTART
                </button>
                <button class="btn btn-danger flex-fill" onclick="sysAction('Shutdown')">
                    <i class="fas fa-power-off"></i> SHUTDOWN
                </button>
            </div>
        </div>
    </div>
</div>

<script src="~/js/among-us.js" asp-append-version="true"></script>